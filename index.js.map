{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function service(query, page = 1, perPage = 15) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '48018775-66f870a0a55ddc658d7ca6c06';\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: perPage,\n  });\n\n  console.log(\"API request:\", `${BASE_URL}?${params}`); \n\n  try {\n    const response = await axios.get(`${BASE_URL}?${params}`);\n    console.log(\"Successful API response:\", response.data); \n    return response;\n  } catch (error) {\n    console.error(\"API request error:\", error); \n    throw error;\n  }\n}","export const elem = {\n  galleryDiv: document.querySelector(\".gallery\"),\n  loadMoreBtn: document.querySelector(\".load-more\"),\n  form: document.querySelector(\".search-form\"),\n  input: document.querySelector('.search-form input[name=\"searchQuery\"]'),\n};\n\nif (!elem.galleryDiv) console.error(\"Gallery not found in DOM\");\nif (!elem.loadMoreBtn) console.error(\"Load More button not found in DOM\");\nif (!elem.form) console.error(\"Form not found in DOM\");\nif (!elem.input) console.error(\"Input field not found in DOM\");\n\nexport function clearGallery() {\n  elem.galleryDiv.innerHTML = \"\";\n}\n\nexport function renderMarkup(img) {\n  elem.galleryDiv.insertAdjacentHTML(\"beforeend\", createMarkup(img));\n}\n\nexport function createMarkup(img) {\n  return img\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n        <div class=\"photo-card\">\n          <a href=\"${largeImageURL}\" class=\"gallery-image\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          </a>\n          <div class=\"info\">\n            <p class=\"info-item\"><b>Likes: ${likes}</b></p>\n            <p class=\"info-item\"><b>Views: ${views}</b></p>\n            <p class=\"info-item\"><b>Comments: ${comments}</b></p>\n            <p class=\"info-item\"><b>Downloads: ${downloads}</b></p>\n          </div>\n        </div>\n        `;\n      }\n    )\n    .join(\"\");\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport Notiflix from \"notiflix\";\nimport \"notiflix/dist/notiflix-3.1.0.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport \"./css/common.css\";\nimport \"./css/styles.css\";\nimport { service } from \"./js/pixabay-api.js\";\nimport { elem, renderMarkup, clearGallery } from \"./js/render-functions.js\";\n\nlet page = 1;\nconst perPage = 15;\n\nconst loadingIndicator = document.getElementById(\"loading-indicator\");\nconst showLoadingSpinner = () => (loadingIndicator.style.display = \"block\");\nconst hideLoadingSpinner = () => (loadingIndicator.style.display = \"none\");\n\nconst hideLoadMoreBtn = () => elem?.loadMoreBtn?.classList.add(\"load-more-hidden\");\nconst showLoadMoreBtn = () => elem?.loadMoreBtn?.classList.remove(\"load-more-hidden\");\n\nhideLoadMoreBtn();\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionPosition: \"bottom\",\n  captionDelay: 200,\n});\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  Notiflix.Notify.init({\n    position: \"right-bottom\",\n    clickToClose: true,\n    timeout: 3000,\n  });\n});\n\nasync function submit(evt) {\n  evt.preventDefault();\n  const text = elem.input.value.trim();\n  if (!text) {\n    hideLoadMoreBtn();\n    Notiflix.Notify.failure(\"Please enter a search query.\");\n    return;\n  }\n\n  page = 1;\n  clearGallery();\n  showLoadingSpinner();\n\n  \n  Notiflix.Notify.info(\"Loading images, please wait.\");\n\n  try {\n    const galleryItems = await service(text, page, perPage);\n    if (!galleryItems?.data?.hits?.length) {\n      iziToast.error({ title: \"Error\", message: \"No images found.\" });\n      return;\n    }\n\n    const totalHits = galleryItems.data.totalHits;\n    totalHits > perPage ? showLoadMoreBtn() : hideLoadMoreBtn();\n\n    Notiflix.Notify.success(`Success! Found ${totalHits} images.`);\nrenderMarkup(galleryItems.data.hits);\nlightbox.refresh();\n\n\n  } catch (error) {\n    Notiflix.Notify.failure(\"An error occurred. Please try again.\");\n  } finally {\n    hideLoadingSpinner();\n  }\n}\n\nasync function onClickBtn() {\n  page += 1;\n  const text = elem.input.value.trim();\n  showLoadingSpinner();\n\n  \n  Notiflix.Notify.info(\"Loading more images, please wait.\");\n\n  try {\n    const galleryItems = await service(text, page, perPage);\n    if (!galleryItems?.data?.hits?.length) {\n      hideLoadMoreBtn();\n      Notiflix.Notify.failure(\"No more results.\");\n      return;\n    }\n\n    renderMarkup(galleryItems.data.hits);\n    lightbox.refresh();\n\n      \n    const { height: cardHeight } = document\n      .querySelector(\".gallery\")\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2, \n      behavior: \"smooth\", \n    });\n\n  } catch (error) {\n    Notiflix.Notify.failure(\"An error occurred while loading more images.\");\n  } finally {\n    hideLoadingSpinner();\n  }\n}\n\nif (elem?.form) elem.form.addEventListener(\"submit\", submit);\nif (elem?.loadMoreBtn) elem.loadMoreBtn.addEventListener(\"click\", onClickBtn);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["service","query","page","perPage","BASE_URL","API_KEY","params","response","axios","error","elem","clearGallery","renderMarkup","img","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","loadingIndicator","showLoadingSpinner","hideLoadingSpinner","hideLoadMoreBtn","_a","showLoadMoreBtn","lightbox","SimpleLightbox","Notiflix","submit","evt","text","galleryItems","_b","iziToast","totalHits","onClickBtn","cardHeight"],"mappings":"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"}